{% extends 'base.html' %}
{% load static %}

{% block title %}–ì–æ—Ä–æ—Å–∫–æ–ø –¥–ª—è {{ sign.name }} –Ω–∞ —Å–µ–≥–æ–¥–Ω—è - –ê—Å—Ç—Ä–æ-–ì–æ—Ä–æ—Å–∫–æ–ø{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<style>
    .sign-header {
        text-align: center;
        padding: 3rem 0;
        position: relative;
        background: linear-gradient(135deg, var(--gradient-start) 0%, var(--gradient-end) 100%);
        border-radius: 15px;
        margin-bottom: 2rem;
        color: white;
        box-shadow: 0 10px 30px rgba(106, 90, 205, 0.3);
        overflow: hidden;
    }
    
    .sign-header::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="1" fill="white"/></svg>');
        background-size: 20px 20px;
        opacity: 0.1;
    }
    
    .sign-symbol {
        font-size: 5rem;
        display: inline-block;
        margin-bottom: 1rem;
        color: white;
        text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
    }
    
    .date-badge {
        display: inline-block;
        background: rgba(255, 255, 255, 0.2);
        color: white;
        padding: 0.5rem 1.5rem;
        border-radius: 50px;
        font-weight: 500;
        margin-bottom: 1.5rem;
        backdrop-filter: blur(5px);
    }
    
    .prediction-category {
        position: relative;
        overflow: hidden;
        margin-bottom: 2rem;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .prediction-category:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 30px rgba(106, 90, 205, 0.2);
    }
    
    .prediction-bg {
        position: absolute;
        top: 0;
        right: 0;
        opacity: 0.05;
        font-size: 8rem;
        line-height: 1;
        z-index: 0;
    }
    
    .prediction-content {
        position: relative;
        z-index: 1;
    }
    
    .share-buttons {
        margin-top: 2rem;
    }
    
    .share-button {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: linear-gradient(135deg, var(--gradient-start) 0%, var(--gradient-end) 100%);
        color: white;
        margin: 0 5px;
        transition: all 0.3s ease;
    }
    
    .share-button:hover {
        transform: translateY(-3px);
        box-shadow: 0 6px 15px rgba(106, 90, 205, 0.3);
    }
    
    .prediction-divider {
        height: 2px;
        background: linear-gradient(90deg, transparent, var(--primary-color), transparent);
        margin: 2rem 0;
        opacity: 0.3;
    }
    
    .zodiac-svg-large {
        width: 150px;
        height: 150px;
        margin: 0 auto;
        display: block;
        filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.5));
    }
    
    .zodiac-svg-large path,
    .zodiac-svg-large circle {
        stroke: white !important;
    }
    
    .zodiac-svg-container svg circle[fill="#8a2be2"] {
        fill: rgba(255, 255, 255, 0.2) !important;
    }
    
    .btn-outline-primary, 
    .btn-primary,
    .btn-outline-primary:focus, 
    .btn-primary:focus {
        background: linear-gradient(135deg, var(--gradient-start) 0%, var(--gradient-end) 100%);
        color: white;
        border: none;
        border-radius: 30px;
        padding: 8px 20px;
        box-shadow: 0 4px 15px rgba(138, 43, 226, 0.3);
        transition: all 0.3s ease;
    }
    
    .btn-outline-primary:hover, 
    .btn-primary:hover {
        transform: translateY(-3px);
        box-shadow: 0 6px 20px rgba(138, 43, 226, 0.4);
        background: linear-gradient(135deg, var(--secondary-color) 0%, var(--primary-color) 100%);
        color: white;
    }
    
    .btn-outline-primary.active {
        background: linear-gradient(135deg, var(--secondary-color) 0%, var(--primary-color) 100%);
        color: white;
    }
    
    .main-prediction {
        border-left: 4px solid var(--primary-color);
        padding-left: 1.5rem;
        font-style: italic;
        color: #666;
        line-height: 1.8;
    }
</style>
{% endblock %}

{% block extra_js %}
<script src="{% static 'img/zodiac_symbols.js' %}"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // –ó–∞–º–µ–Ω—è–µ–º –∏–∫–æ–Ω–∫–∏ –∑–Ω–∞–∫–æ–≤ –∑–æ–¥–∏–∞–∫–∞ –Ω–∞ SVG
        document.querySelectorAll('.zodiac-svg-container').forEach(function(container) {
            const signName = container.getAttribute('data-sign').toLowerCase();
            if (ZodiacSymbols[getZodiacKey(signName)]) {
                container.innerHTML = ZodiacSymbols[getZodiacKey(signName)];
            }
        });
        
        // –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–ª—é—á–∞ –¥–ª—è –∑–Ω–∞–∫–∞ –∑–æ–¥–∏–∞–∫–∞
        function getZodiacKey(signName) {
            const mapping = {
                '–æ–≤–µ–Ω': 'aries',
                '—Ç–µ–ª–µ—Ü': 'taurus',
                '–±–ª–∏–∑–Ω–µ—Ü—ã': 'gemini',
                '—Ä–∞–∫': 'cancer',
                '–ª–µ–≤': 'leo',
                '–¥–µ–≤–∞': 'virgo',
                '–≤–µ—Å—ã': 'libra',
                '—Å–∫–æ—Ä–ø–∏–æ–Ω': 'scorpio',
                '—Å—Ç—Ä–µ–ª–µ—Ü': 'sagittarius',
                '–∫–æ–∑–µ—Ä–æ–≥': 'capricorn',
                '–≤–æ–¥–æ–ª–µ–π': 'aquarius',
                '—Ä—ã–±—ã': 'pisces'
            };
            
            return mapping[signName] || signName;
        }
        
        // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –∫ SVG –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞
        document.querySelectorAll('.zodiac-svg-container svg').forEach(function(svg) {
            svg.classList.add('zodiac-svg-large');
        });
    });
</script>
{% endblock %}

{% block content %}
<div class="sign-header" data-aos="fade-up">
    <div class="zodiac-svg-container" data-sign="{{ sign.name }}"></div>
    <h2 class="display-5 mt-3">–ì–æ—Ä–æ—Å–∫–æ–ø –¥–ª—è {{ sign.name }}</h2>
    <div class="date-badge">
        <i class="fas fa-calendar-alt me-2"></i>
        {{ horoscope.date|date:"d.m.Y" }}
    </div>
    <p class="mb-0 text-white-50">{{ sign.date_range }}</p>
</div>

<div class="row">
    <div class="col-lg-8 offset-lg-2">
        <div class="prediction-block" data-aos="fade-up">
            <div class="mb-4 prediction-content">
                <h3><i class="fas fa-star me-2 text-primary"></i>–û–±—â–∏–π –≥–æ—Ä–æ—Å–∫–æ–ø</h3>
                <p class="fs-5 main-prediction">{{ horoscope.prediction }}</p>
            </div>

            <div class="prediction-divider"></div>

            <div class="mt-4" data-aos="fade-up" data-aos-delay="100">
                <div class="prediction-block prediction-category">
                    <div class="prediction-bg">‚ù§Ô∏è</div>
                    <div class="prediction-content">
                        <div class="prediction-icon text-danger">
                            <i class="fas fa-heart"></i>
                        </div>
                        <h4>–õ—é–±–æ–≤—å</h4>
                        <p>{{ horoscope.love }}</p>
                    </div>
                </div>
                
                <div class="prediction-block prediction-category" data-aos="fade-up" data-aos-delay="200">
                    <div class="prediction-bg">üíº</div>
                    <div class="prediction-content">
                        <div class="prediction-icon text-primary">
                            <i class="fas fa-briefcase"></i>
                        </div>
                        <h4>–ö–∞—Ä—å–µ—Ä–∞</h4>
                        <p>{{ horoscope.career }}</p>
                    </div>
                </div>
                
                <div class="prediction-block prediction-category" data-aos="fade-up" data-aos-delay="300">
                    <div class="prediction-bg">üí™</div>
                    <div class="prediction-content">
                        <div class="prediction-icon text-success">
                            <i class="fas fa-heartbeat"></i>
                        </div>
                        <h4>–ó–¥–æ—Ä–æ–≤—å–µ</h4>
                        <p>{{ horoscope.health }}</p>
                    </div>
                </div>
            </div>
            
            <div class="text-center mt-5" data-aos="fade-up" data-aos-delay="400">
                <div class="lucky-number-block d-inline-block px-5 py-4">
                    <h4 class="text-white mb-3">–í–∞—à–µ —Å—á–∞—Å—Ç–ª–∏–≤–æ–µ —á–∏—Å–ª–æ</h4>
                    <div class="lucky-number">{{ horoscope.lucky_number }}</div>
                </div>
            </div>
            
        </div>
        
        <div class="mt-5 text-center" data-aos="fade-up">
            <a href="{% url 'index' %}" class="btn btn-primary">
                <i class="fas fa-arrow-left me-2"></i>–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É –∑–Ω–∞–∫–æ–≤
            </a>
        </div>
    </div>
</div>

{% if sign.description %}
<div class="row mt-5" data-aos="fade-up" data-aos-delay="100">
    <div class="col-lg-8 offset-lg-2">
        <div class="prediction-block">
            <h3><i class="fas fa-info-circle me-2 text-primary"></i>–û –∑–Ω–∞–∫–µ {{ sign.name }}</h3>
            <p>{{ sign.description }}</p>
            
            <div class="mt-4">
                <h5 class="mb-3">–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å</h5>
                <div class="d-flex flex-wrap justify-content-center">
                    {% for other_sign in compatible_signs %}
                    <a href="{% url 'sign_by_name' other_sign %}" class="btn btn-outline-primary m-1">{{ other_sign }}</a>
                    {% empty %}
                    <p class="text-muted">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞.</p>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endif %}

<div class="row mt-5" data-aos="fade-up">
    <div class="col-lg-8 offset-lg-2">
        <div class="prediction-block text-center">
            <h4>–î—Ä—É–≥–∏–µ –∑–Ω–∞–∫–∏ –∑–æ–¥–∏–∞–∫–∞</h4>
            <div class="d-flex flex-wrap justify-content-center mt-3">
                <a href="{% url 'sign_by_name' '–û–≤–µ–Ω' %}" class="btn {% if sign.name == '–û–≤–µ–Ω' %}btn-primary{% else %}btn-outline-primary{% endif %} m-1">‚ôà –û–≤–µ–Ω</a>
                <a href="{% url 'sign_by_name' '–¢–µ–ª–µ—Ü' %}" class="btn {% if sign.name == '–¢–µ–ª–µ—Ü' %}btn-primary{% else %}btn-outline-primary{% endif %} m-1">‚ôâ –¢–µ–ª–µ—Ü</a>
                <a href="{% url 'sign_by_name' '–ë–ª–∏–∑–Ω–µ—Ü—ã' %}" class="btn {% if sign.name == '–ë–ª–∏–∑–Ω–µ—Ü—ã' %}btn-primary{% else %}btn-outline-primary{% endif %} m-1">‚ôä –ë–ª–∏–∑–Ω–µ—Ü—ã</a>
                <a href="{% url 'sign_by_name' '–†–∞–∫' %}" class="btn {% if sign.name == '–†–∞–∫' %}btn-primary{% else %}btn-outline-primary{% endif %} m-1">‚ôã –†–∞–∫</a>
                <a href="{% url 'sign_by_name' '–õ–µ–≤' %}" class="btn {% if sign.name == '–õ–µ–≤' %}btn-primary{% else %}btn-outline-primary{% endif %} m-1">‚ôå –õ–µ–≤</a>
                <a href="{% url 'sign_by_name' '–î–µ–≤–∞' %}" class="btn {% if sign.name == '–î–µ–≤–∞' %}btn-primary{% else %}btn-outline-primary{% endif %} m-1">‚ôç –î–µ–≤–∞</a>
                <a href="{% url 'sign_by_name' '–í–µ—Å—ã' %}" class="btn {% if sign.name == '–í–µ—Å—ã' %}btn-primary{% else %}btn-outline-primary{% endif %} m-1">‚ôé –í–µ—Å—ã</a>
                <a href="{% url 'sign_by_name' '–°–∫–æ—Ä–ø–∏–æ–Ω' %}" class="btn {% if sign.name == '–°–∫–æ—Ä–ø–∏–æ–Ω' %}btn-primary{% else %}btn-outline-primary{% endif %} m-1">‚ôè –°–∫–æ—Ä–ø–∏–æ–Ω</a>
                <a href="{% url 'sign_by_name' '–°—Ç—Ä–µ–ª–µ—Ü' %}" class="btn {% if sign.name == '–°—Ç—Ä–µ–ª–µ—Ü' %}btn-primary{% else %}btn-outline-primary{% endif %} m-1">‚ôê –°—Ç—Ä–µ–ª–µ—Ü</a>
                <a href="{% url 'sign_by_name' '–ö–æ–∑–µ—Ä–æ–≥' %}" class="btn {% if sign.name == '–ö–æ–∑–µ—Ä–æ–≥' %}btn-primary{% else %}btn-outline-primary{% endif %} m-1">‚ôë –ö–æ–∑–µ—Ä–æ–≥</a>
                <a href="{% url 'sign_by_name' '–í–æ–¥–æ–ª–µ–π' %}" class="btn {% if sign.name == '–í–æ–¥–æ–ª–µ–π' %}btn-primary{% else %}btn-outline-primary{% endif %} m-1">‚ôí –í–æ–¥–æ–ª–µ–π</a>
                <a href="{% url 'sign_by_name' '–†—ã–±—ã' %}" class="btn {% if sign.name == '–†—ã–±—ã' %}btn-primary{% else %}btn-outline-primary{% endif %} m-1">‚ôì –†—ã–±—ã</a>
            </div>
        </div>
    </div>
</div>
{% endblock %} 